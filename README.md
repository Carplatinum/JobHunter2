# JobHunter

## Описание проекта

**JobHunter** - консольное приложение на Python для поиска и управления вакансиями с сайта hh.ru (HeadHunter).  
Проект помогает автоматизировать сбор вакансий по ключевым словам, фильтровать их по зарплате и описанию, сохранять результаты для дальнейшего анализа и выбора.

---

## Запуск проекта

1. Клонируйте репозиторий:
git clone https://github.com/Carplatinum/JobHunter.git  
cd JobHunter
2. Установите зависимости:
pip install -r requirements.txt  
3. Создайте файл .env (если нужно) и настройте переменные окружения:  
VACANCY_FILE=vacancies.json
DEFAULT_PER_PAGE=20
LOG_LEVEL=INFO

## Запуск проекта
Запустите основной скрипт `python main.py`, который реализует логику поиска и сохранения вакансий. 

## Основной функционал
1. Поиск вакансий по ключевому слову с hh.ru
2. Сохранение вакансий в JSON или CSV (в зависимости от расширения файла)
3. Просмотр всех сохранённых вакансий
4. Фильтрация вакансий по ключевым словам в описании
5. Фильтрация вакансий по диапазону зарплат
6. Сортировка вакансий по зарплате и вывод топ N
7. Удаление вакансий по названию
8. Логирование работы приложения

## Структура проекта
- main.py - точка входа, реализует интерфейс взаимодействия с пользователем
- src/api.py - модуль для работы с API hh.ru
- src/file_saver.py - модуль для работы с файлами JSON и CSV
- src/vacancy.py - класс для представления вакансии
- src/utils.py - вспомогательные функции для фильтрации, сортировки и вывода вакансий
- src/config.py - конфигурационные параметры

## Пример работы
Меню:
1. Найти вакансии и сохранить в файл
2. Показать все сохранённые вакансии
3. Показать топ N вакансий по зарплате
4. Фильтровать вакансии по ключевому слову в описании
5. Фильтровать вакансии по диапазону зарплат
6. Удалить вакансию по названию
7. Выйти  

Выберите действие: 1  
Введите поисковый запрос: python  
Сколько вакансий загрузить (по умолчанию 20): 10  
Загружено и сохранено 10 вакансий.  
---
### Работа с API hh.ru
- Модуль src/api.py реализует абстрактный класс и конкретный класс для работы с API hh.ru:  
- VacancyAPI - абстрактный класс с методами _connect и get_vacancies, которые должны быть реализованы в наследниках.  
- HeadHunterAPI - класс для работы с API hh.ru, наследует VacancyAPI.  
- Приватный атрибут __session для сессии запросов.  
- Метод _connect отправляет тестовый запрос к API и проверяет статус ответа.  
- Метод get_vacancies получает вакансии по ключевому слову, вызывает _connect перед запросом.  
- Параметры запроса включают ключевое слово, количество вакансий на страницу и регион (Россия).  

### Работа с вакансиями
- Модуль src/vacancy.py содержит класс Vacancy для представления вакансии с такими особенностями:  
Используется __slots__ для экономии памяти: четыре приватных атрибута - __title, __url, __salary, __description.  
- При инициализации данные проходят валидацию через приватные методы:  
Проверка и очистка названия, ссылки, зарплаты и описания.  
- Реализованы магические методы сравнения __eq__, __lt__, __gt__ для сравнения вакансий по зарплате.  
- Свойства (@property) для безопасного доступа к атрибутам.  
- Метод as_dict() для представления вакансии в виде словаря (удобно для сохранения в файлы).  
- Класс-метод cast_to_object_list преобразует список словарей (как из API) в список объектов Vacancy.  

### Вспомогательные функции
- Модуль src/utils.py содержит набор функций для удобной работы со списками вакансий:  
filter_vacancies(vacancies, keywords) - фильтрует вакансии, оставляя только те, в описании которых есть хотя бы одно из ключевых слов.  
- get_vacancies_by_salary(vacancies, salary_range) - фильтрует вакансии по заданному диапазону зарплат (формат строки: "min-max").  
- sort_vacancies(vacancies) - сортирует вакансии по зарплате в порядке убывания.  
- get_top_vacancies(vacancies, top_n) - возвращает топ N вакансий из списка.  
- print_vacancies(vacancies) - выводит вакансии в удобочитаемом формате.  

### Работа с файлами вакансий
В проекте реализована гибкая система сохранения вакансий с поддержкой форматов JSON и CSV.
- Абстрактный класс VacancyFileSaver  
Определяет интерфейс для работы с файлами вакансий.  
Объявляет абстрактные методы:  
add_vacancy(vacancy: Vacancy) -> None - добавление вакансии.  
get_vacancies() -> List[Vacancy] - получение списка вакансий.  
delete_vacancy(vacancy: Vacancy) -> None - удаление вакансии.  
- Класс JSONSaver  
Работает с файлами формата JSON.  
При добавлении вакансии проверяет отсутствие дубликатов.  
Вакансии сохраняются в JSON в виде списка словарей, соответствующих атрибутам класса Vacancy.  
Поддерживает чтение, добавление и удаление вакансий.  
Имя файла задаётся через конструктор с значением по умолчанию из конфигурации.


- Класс CSVSaver  
Работает с файлами формата CSV.  
Аналогично JSONSaver обеспечивает добавление без дубликатов, чтение и удаление вакансий.  
Использует стандартные средства Python для работы с CSV (csv.DictReader и csv.DictWriter).  
Имя файла по умолчанию - "data/vacancies.csv", может быть переопределено при создании экземпляра.  


## Требования к окружению

- Python 3.13 и выше
- Зависимости указаны в `pyproject.toml` и устанавливаются через Poetry
- Кроссплатформенно: Linux, Windows, macOS

---

## Поддержка и контакты

- Автор: ANTAQ  
- Email: mymillions@ya.ru  
- GitHub: [Carplatinum](https://github.com/Carplatinum/JobHunter)

## Лицензия и статус проекта

- Лицензия: MIT License 
- Статус: разработка
- Тесты запускаются командой:
pytest
- Код форматируется с помощью `black` и проверяется `flake8`, `mypy` для качества и типизации.
